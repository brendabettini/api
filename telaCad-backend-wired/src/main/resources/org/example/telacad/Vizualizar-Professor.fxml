<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.shape.Circle?>
<?import javafx.scene.shape.SVGPath?>
<?import javafx.scene.text.Text?>
<?import javafx.scene.layout.FlowPane?>

<StackPane fx:controller="org.example.telacad.Vizualizar_ProfessorController"
           xmlns:fx="http://javafx.com/fxml/1" styleClass="root"
           stylesheets="@css/vizualizar_professor.css">

    <AnchorPane styleClass="main-panel" maxWidth="1000" maxHeight="650">
        <children>
            <Button text="X" styleClass="close-button" AnchorPane.topAnchor="0" AnchorPane.rightAnchor="10"
                    onAction="#fechar"/>

            <HBox spacing="40" AnchorPane.topAnchor="20" AnchorPane.bottomAnchor="20"
                  AnchorPane.leftAnchor="20" AnchorPane.rightAnchor="20">

                <VBox minWidth="280" spacing="15" alignment="TOP_CENTER">
                    <StackPane styleClass="profile-image-stack">
                        <Circle radius="50" styleClass="profile-circle"/>
                        <SVGPath content="M12,12A5,5 0 0,1 7,7A5,5 0 0,1 12,2A5,5 0 0,1 17,7A5,5 0 0,1 12,12M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z" styleClass="nav-icon" />
                    </StackPane>
                    <Label text="PROFESSOR 1" style="-fx-font-weight: bold; -fx-font-size: 16px;"/>

                    <VBox spacing="5" alignment="CENTER_LEFT" style="-fx-padding: 10 0 0 0;">
                        <Label text="Nome Completo" styleClass="form-label"/>
                        <TextField fx:id="nomeCompletoField" promptText="Nome do Professor"/>

                        <Label text="E-mail Institucional" styleClass="form-label"/>
                        <TextField fx:id="emailField" promptText="email@institucional.com"/>

                        <Label text="Cursos" styleClass="form-label"/>
                        <ScrollPane fitToWidth="true" style="-fx-background-color: transparent;">
                            <content>
                                <FlowPane fx:id="cursosSelecionadosContainer"
                                          onMouseClicked="#handleAbrirSelecaoCursos"
                                          styleClass="cursos-display-area" />
                            </content>
                        </ScrollPane>

                        <Label text="Situação" styleClass="form-label"/>
                        <TextField fx:id="situationTextField" text="Inativa" editable="false"/>

                    </VBox>
                    <Region VBox.vgrow="ALWAYS"/>
                    <HBox alignment="CENTER_LEFT" spacing="10">
                        <Button fx:id="toggleStatusButton" text="ATIVAR" onAction="#handleToggleStatus"
                                styleClass="activate-button"/>

                        <Button fx:id="saveButton" text="SALVAR ALTERAÇÕES" onAction="#handleSaveChanges"
                                styleClass="save-button" visible="false"/>
                    </HBox>
                </VBox>

                <VBox spacing="20" HBox.hgrow="ALWAYS">
                    <Label text="ALUNOS ORIENTADOS" styleClass="section-title" alignment="CENTER"/>
                    <TilePane fx:id="studentGrid" styleClass="student-grid" prefColumns="4" alignment="TOP_LEFT"/>
                    <Region VBox.vgrow="ALWAYS"/>
                    <HBox spacing="20" alignment="CENTER">
                        <HBox styleClass="legend-item"><children><Circle radius="8" style="-fx-fill: #E0E0E0;"/><Label text="Não Iniciado"/></children></HBox>
                        <HBox styleClass="legend-item"><children><Circle radius="8" style="-fx-fill: #FFEE58;"/><Label text="Em Andamento"/></children></HBox>
                        <HBox styleClass="legend-item"><children><Circle radius="8" style="-fx-fill: #66BB6A;"/><Label text="Concluído"/></children></HBox>
                        <HBox styleClass="legend-item"><children><Circle radius="8" style="-fx-fill: #EF5350;"/><Label text="Desistência"/></children></HBox>
                    </HBox>
                </VBox>
            </HBox>
        </children>
    </AnchorPane>

    <Pane fx:id="overlayPane" styleClass="overlay" visible="false"/>

    <VBox fx:id="cursoDialog" styleClass="dialog-pane" alignment="TOP_CENTER"
          spacing="15" maxWidth="350" maxHeight="450" visible="false">
        <children>
            <Label text="Selecione os cursos" styleClass="dialog-title" alignment="CENTER" maxWidth="Infinity"/>
            <ScrollPane fitToWidth="true" VBox.vgrow="ALWAYS" style="-fx-background-color: transparent;">
                <content>
                    <VBox fx:id="cursosContainer" spacing="10" styleClass="cursos-container"/>
                </content>
            </ScrollPane>
            <Button text="OK" onAction="#handleOkCursoButton" styleClass="ok-button"/>
        </children>
        <padding> <Insets bottom="20.0" left="20.0" right="20.0" top="10.0" />
        </padding>
    </VBox>

    <VBox fx:id="successDialog" styleClass="dialog-pane" alignment="CENTER"
          spacing="20" maxWidth="350" maxHeight="200" visible="false">
        <children>
            <Label text="Informações salvas com sucesso!" styleClass="dialog-title" alignment="CENTER"/>
            <Button text="OK" onAction="#handleSuccessOk" styleClass="ok-button"/>
        </children>
        <padding> <Insets bottom="20.0" left="20.0" right="20.0" top="10.0" />
        </padding>
    </VBox>

</StackPane>