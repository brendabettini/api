<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.shape.Circle?>
<?import javafx.scene.shape.SVGPath?>
<?import javafx.scene.text.Font?>

<StackPane maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" prefHeight="720.0" prefWidth="1280.0" styleClass="root" stylesheets="@css/chat.css" xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" fx:controller="org.example.telacad.Chat_Controller">
    <children>
        <AnchorPane fx:id="mainContent">
            <children>
                <VBox alignment="TOP_CENTER" prefWidth="140.0" spacing="20.0" styleClass="nav-panel" AnchorPane.bottomAnchor="70.0" AnchorPane.leftAnchor="30.0" AnchorPane.topAnchor="70.0">
                    <padding>
                        <Insets top="20.0" />
                    </padding>
                    <children>
                        <VBox alignment="CENTER" spacing="5.0">
                            <children>
                                <StackPane prefHeight="70.0" prefWidth="70.0">
                                    <children>
                                        <Circle fill="#E0E0E0" radius="35.0" />
                                        <SVGPath content="M12,12A5,5 0 0,1 7,7A5,5 0 0,1 12,2A5,5 0 0,1 17,7A5,5 0 0,1 12,12M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z" styleClass="nav-icon" />
                                    </children>
                                </StackPane>
                                <Label styleClass="professor-name" text="Aluno" textAlignment="CENTER" />
                            </children>
                        </VBox>
                        <Button fx:id="perfilBtn" mnemonicParsing="false" styleClass="nav-button" onAction="#abrirPerfil">
                            <graphic>
                                <SVGPath content="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.13,5.12L18.88,8.87M3,17.25V21H6.75L17.81,9.94L14.06,6.19L3,17.25Z" styleClass="nav-icon" />
                            </graphic>
                        </Button>
                        <VBox VBox.vgrow="ALWAYS" /> <Button mnemonicParsing="false" styleClass="nav-button">
                        <graphic>
                            <SVGPath content="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20M8,12H16V14H8V12M8,16H16V18H8V16Z" styleClass="nav-icon" />
                        </graphic>
                        <VBox.margin>
                            <Insets bottom="10.0" />
                        </VBox.margin>
                    </Button>
                    </children>
                </VBox>
                <Button fx:id="voltarBtn" onAction="#voltar" styleClass="btn-voltar" text="VOLTAR" AnchorPane.bottomAnchor="25.0" AnchorPane.leftAnchor="30.0" />
                <AnchorPane fx:id="mainPanel" styleClass="main-content-panel" AnchorPane.bottomAnchor="70.0" AnchorPane.leftAnchor="200.0" AnchorPane.rightAnchor="30.0" AnchorPane.topAnchor="70.0">
                    <children>
                        <HBox alignment="CENTER" styleClass="chat-input-bar" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0">
                            <children>
                                <TextField fx:id="messageTextField" onAction="#sendMessage" promptText="Digite sua mensagem..." styleClass="chat-input-field" HBox.hgrow="ALWAYS" />
                                <Button mnemonicParsing="false" styleClass="chat-action-button"> <graphic>
                                    <SVGPath content="M16.5,6V17.5A4,4 0 0,1 12.5,21.5A4,4 0 0,1 8.5,17.5V5A2.5,2.5 0 0,1 11,2.5A2.5,2.5 0 0,1 13.5,5V15.5A1,1 0 0,1 12.5,16.5A1,1 0 0,1 11.5,15.5V6H10V15.5A2.5,2.5 0 0,0 12.5,18A2.5,2.5 0 0,0 15,15.5V5A4,4 0 0,0 11,1A4,4 0 0,0 7,5V17.5A5.5,5.5 0 0,0 12.5,23A5.5,5.5 0 0,0 18,17.5V6H16.5Z" styleClass="nav-icon" />
                                </graphic>
                                </Button>
                                <Button fx:id="chatDocButton" onAction="#handleOpenDocuments" mnemonicParsing="false" styleClass="chat-action-button">
                                    <graphic>
                                        <SVGPath content="M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19C3,20.1 3.9,21 5,21H19C20.1,21 21,20.1 21,19V12H19V19M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3H14Z" styleClass="nav-icon" />
                                    </graphic>
                                </Button>
                                <Button fx:id="sendButton" mnemonicParsing="false" onAction="#sendMessage" styleClass="chat-send-button">
                                    <graphic>
                                        <SVGPath content="M2,21L23,12L2,3V10L17,12L2,14V21Z" styleClass="send-icon" />
                                    </graphic>
                                </Button>
                            </children>
                            <padding>
                                <Insets left="10.0" right="10.0" />
                            </padding>
                        </HBox>
                        <HBox alignment="CENTER_LEFT" spacing="10.0" styleClass="chat-header" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="0.0">
                            <children>
                                <Circle fill="#E0E0E0" radius="20.0" />
                                <Label text="Professor" styleClass="chat-header-name" />
                            </children>
                            <padding>
                                <Insets bottom="10.0" left="20.0" right="20.0" top="10.0" />
                            </padding>
                        </HBox>
                        <ScrollPane fx:id="chatScrollPane" fitToWidth="true" hbarPolicy="NEVER" styleClass="chat-pane" AnchorPane.bottomAnchor="70.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="60.0">
                            <content>
                                <VBox fx:id="chatVBox" spacing="10.0" styleClass="chat-vbox">
                                    <padding>
                                        <Insets bottom="10.0" left="20.0" right="20.0" top="10.0" />
                                    </padding>
                                    <children>
                                        <HBox alignment="CENTER_LEFT">
                                            <children>
                                                <Label styleClass="message-bubble-received" text="Olá! Como posso ajudar hoje?" wrapText="true" />
                                            </children>
                                        </HBox>
                                        <HBox alignment="CENTER_RIGHT">
                                            <children>
                                                <Label styleClass="message-bubble-sent" text="Oi, professor! Estou com uma dúvida sobre o último exercício." wrapText="true" />
                                            </children>
                                        </HBox>
                                    </children>
                                </VBox>
                            </content>
                        </ScrollPane>
                    </children>
                </AnchorPane>
            </children>
        </AnchorPane>

        <VBox fx:id="overlayPane" alignment="CENTER" style="-fx-background-color: rgba(0, 0, 0, 0.6);" visible="false" />

        <VBox fx:id="documentPopupVBox" alignment="TOP_CENTER" maxHeight="400.0" maxWidth="500.0" styleClass="dialog-pane" visible="false" spacing="10.0">
            <children>
                <HBox alignment="CENTER_LEFT" styleClass="popup-header-style">
                    <children>
                        <Label text="Documentos" styleClass="dialog-title-style" />
                        <Region HBox.hgrow="ALWAYS" />
                        <Button onAction="#closeDocumentPopup" styleClass="popup-close-button-style" text="X" />
                    </children>
                    <padding>
                        <Insets bottom="5.0" left="15.0" right="10.0" top="5.0" />
                    </padding>
                </HBox>
                <StackPane VBox.vgrow="ALWAYS">
                    <children>
                        <Label fx:id="docEmptyMessageLabel" styleClass="empty-label-style" text="Não há nada aqui ainda!" visible="false" StackPane.alignment="CENTER" />
                        <ScrollPane fx:id="docScrollPane" fitToWidth="true" styleClass="transparent-scroll-style">
                            <content>
                                <VBox fx:id="docListVBox" styleClass="document-list-style" />
                            </content>
                        </ScrollPane>
                    </children>
                    <padding>
                        <Insets bottom="15.0" left="15.0" right="15.0" top="5.0" />
                    </padding>
                </StackPane>
            </children>
            <padding>
                <Insets bottom="20.0" left="20.0" right="20.0" top="10.0" />
            </padding>
        </VBox>

    </children>
</StackPane>